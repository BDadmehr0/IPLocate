import json
import requests
from bs4 import BeautifulSoup

def main_APP(ip) -> str :
    
    cookies = {
        '_ga_DHL4YQEJFS': 'GS1.1.1694805215.2.1.1694811856.59.0.0',
        '_ga': 'GA1.2.1062077168.1694434314',
        '_omappvp': 'xi6c0vSDcfgZKPHgT6QrE0288vBdZAYI6KtI7eKdyVFAcKeI1WhZx7csrdirIoBh25Zc5H9aDcJrFFdnD3rpfNEcaaMzit4p',
        '_clck': '5qnjkx|2|fex|0|1349',
        '__qca': 'P0-1824596116-1694434321765',
        '_pbjs_userid_consent_data': '3524755945110770',
        'cookie': '533a36d5-bd14-44da-a945-ce610cb37a1b',
        '__gads': 'ID=fa4a869be6ae4227-226283106ede0005:T=1694434354:RT=1694811869:S=ALNI_MZwxpG70c_dr9iSBL15VABA4dXOSQ',
        '__gpi': 'UID=00000c9fdb7ba745:T=1694434354:RT=1694811869:S=ALNI_MYeBTxxrnMES1qzQQSIQSYly7wnYA',
        'cto_bundle': '1OoG5184T04lMkJLMzlqVjRxQXhraGhPS0tUSVoySkQlMkZ1eWM1aXlXaWJWUzljcFhjZ0NNSGxoa09DSCUyQkhHTTUzb0c5dmxqOHlpcXpJbUhTcSUyQjA5RlklMkZVR0ppWW9BU056RmpHQTg3THVybHglMkJkQklBbm5iYWE4N2JRTDZiYjM2RDg4b0VrbjFDVFRmR1EzOUVyRW1vTUE2Z2RPJTJGVHloN0wxclgwVVJsQ3VDbkp4a0JHNCUzRA',
        'cto_bidid': '9z9dN19MYW9UN3VNTjlZdXBnTUZISHFlJTJGYnlBcnYyY0pyZFMya2pnMTVpdEJ3eVVHaGklMkZFZW5HZUhnbkNDTVBsSlZJTkhjMGVtd3d1Zm1XOGJvaThZVGZGYVhTYVdsNDVUOEdYSlhxbVI0eXNaV3p6TSUyRm9GRk9xaWtpQjRaaDZ6WW9nJTJC',
        'cto_dna_bundle': '00MzfF9QUzlFVlN0YXlsWGJrUDdyVnhxWnkzWkN2U0ZXOUdOdjE5UUdlM2VEQ3FYdFlMZnhDZ3RZVlluTUhDJTJCbHNDSEpuU2NuQkhGemQwOHdJOTh5MzJrS2JRJTNEJTNE',
        'pt': 'c8d50fd8d99794e6af65fd793eac87f9',
        '_gid': 'GA1.2.1721439361.1694805227',
        '_cc_id': '3b0c145a50cce2d2f28db274fe821346',
        'panoramaId_expiry': '1695410067287',
        'panoramaId': '3198e903f40daf19bb458a188c9416d53938d90c0ba404ca5624377d86b42107',
        'panoramaIdType': 'panoIndiv',
        '__cf_bm': 'yqAfurRNE66AvVMo6mfQ2sDOOQ14lKajNqSVZ0KI8ZA-1694811876-0-ATuyh/gReNZVl2TtBcTqNG2ZZzTK2xLDgtGISYPThsJclI2CrH9zhv1BPTXSoXfh+rX5Og9Xg6APfPq165jcYBk=',
        'euconsent-v2': 'CPyJDEAPyJDEAAKAwAENDXCsAP_AAH_AACiQJqtV_H__bW9r8X7_aft0eY1P9_j77uQxBhfJE-4F3LvW_JwXx2E5NF36tqoKmRoEu3ZBIUNlHJHUTVmwaogVryHsak2cpTNKJ6BkkFMRM2dYCF5vm4tjeQKY5_p_d3fx2D-t_dv839z3z81Xn3d5f--0-PCdU5-9Dfn9fRfb-9IP9_78v8v8_l_rk2_eT13_pcvr_D--f_87_XW-4goAEmGhcQBdkQEhNoGEUCAEYVhARQKAAAASBogIAXBgU7IwCXWAiAECKAA4IAQgAoyABAAAJAAhEAEgRQIAAIBAIAAQAIBAIAGBgAHABaCAQAAgOgYphQAKBYQJEJEQpgQhQJBAS2VCCUFwgrhAEWWBFAIjYKABAEgIrAAEBYvAYAkBKxIIEuoNoAACABAKKUKhFJ-YAhwTNlqrxQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA.YAAAAAAAAAAA',
        'addtl_consent': '1~43.3.9.6.9.13.6.4.15.9.5.2.11.1.7.1.3.2.10.33.4.6.9.17.2.9.20.7.20.5.20.6.5.1.4.11.29.4.14.9.3.10.6.2.9.6.6.9.8.29.4.5.3.1.27.1.17.10.9.1.8.6.2.8.3.4.146.65.1.17.1.18.25.35.5.18.9.7.41.2.4.18.24.4.9.6.5.2.14.18.7.3.2.2.8.28.8.6.3.10.4.20.2.13.4.10.11.1.3.22.16.2.6.8.6.11.6.5.33.11.8.1.10.28.12.1.5.19.9.6.40.17.4.9.15.8.7.3.12.7.2.4.1.7.12.13.22.13.2.14.10.1.4.15.2.4.9.4.5.4.7.13.5.15.4.13.4.14.10.15.2.5.6.2.2.1.2.14.7.4.8.2.9.10.18.12.13.2.18.1.1.3.1.1.9.25.4.1.19.8.4.8.5.4.8.4.4.2.14.2.13.4.2.6.9.6.3.2.2.3.5.2.3.6.10.11.6.3.19.11.3.1.2.3.9.19.26.3.10.7.6.4.3.4.6.3.3.3.3.1.1.1.6.11.3.1.1.11.6.1.10.5.8.3.2.2.4.3.2.2.7.15.7.14.1.3.3.4.5.4.3.2.2.5.5.1.2.9.7.9.1.5.3.7.10.11.1.3.1.1.2.1.3.2.6.1.12.8.1.3.1.1.2.2.7.7.1.4.3.6.1.2.1.4.1.1.4.1.1.2.1.8.1.7.4.3.3.3.5.3.15.1.15.10.28.1.2.2.12.3.4.1.6.3.4.7.1.3.1.4.1.5.3.1.3.4.1.5.2.3.1.2.2.6.2.1.2.2.2.4.1.1.1.2.2.1.1.1.1.2.1.1.1.2.2.1.1.2.1.2.1.7.1.4.1.2.1.1.1.1.2.1.4.2.1.1.9.1.6.2.1.6.2.3.2.1.1.1.2.5.2.4.1.1.2.2.1.1.7.1.2.2.1.2.1.2.3.1.1.2.4.1.1.1.5.1.3.6.3.1.5.5.4.1.2.3.1.4.3.2.2.3.1.1.1.1.1.11.1.3.1.1.2.2.5.2.3.3.5.2.7.1.1.2.5.1.9.5.1.3.1.8.4.5.1.9.1.1.1.2.1.1.1.4.2.13.1.1.3.1.2.2.3.1.2.1.1.1.2.1.3.1.1.1.1.2.4.1.5.1.2.4.3.8.2.2.9.7.2.2.1.2.1.3.1.6.1.7.1.1.2.6.3.1.2.1.200.200.100.100.200.400.100.100.100.200.200.1700.100.204.596.100.1000.800.500.400.400.500.1300',
    }

    headers = {
        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/117.0',
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8',
        'Accept-Language': 'en-US,en;q=0.5',
        # 'Accept-Encoding': 'gzip, deflate, br',
        'Connection': 'keep-alive',
        # 'Cookie': '_ga_DHL4YQEJFS=GS1.1.1694805215.2.1.1694811856.59.0.0; _ga=GA1.2.1062077168.1694434314; _omappvp=xi6c0vSDcfgZKPHgT6QrE0288vBdZAYI6KtI7eKdyVFAcKeI1WhZx7csrdirIoBh25Zc5H9aDcJrFFdnD3rpfNEcaaMzit4p; _clck=5qnjkx|2|fex|0|1349; __qca=P0-1824596116-1694434321765; _pbjs_userid_consent_data=3524755945110770; cookie=533a36d5-bd14-44da-a945-ce610cb37a1b; __gads=ID=fa4a869be6ae4227-226283106ede0005:T=1694434354:RT=1694811869:S=ALNI_MZwxpG70c_dr9iSBL15VABA4dXOSQ; __gpi=UID=00000c9fdb7ba745:T=1694434354:RT=1694811869:S=ALNI_MYeBTxxrnMES1qzQQSIQSYly7wnYA; cto_bundle=1OoG5184T04lMkJLMzlqVjRxQXhraGhPS0tUSVoySkQlMkZ1eWM1aXlXaWJWUzljcFhjZ0NNSGxoa09DSCUyQkhHTTUzb0c5dmxqOHlpcXpJbUhTcSUyQjA5RlklMkZVR0ppWW9BU056RmpHQTg3THVybHglMkJkQklBbm5iYWE4N2JRTDZiYjM2RDg4b0VrbjFDVFRmR1EzOUVyRW1vTUE2Z2RPJTJGVHloN0wxclgwVVJsQ3VDbkp4a0JHNCUzRA; cto_bidid=9z9dN19MYW9UN3VNTjlZdXBnTUZISHFlJTJGYnlBcnYyY0pyZFMya2pnMTVpdEJ3eVVHaGklMkZFZW5HZUhnbkNDTVBsSlZJTkhjMGVtd3d1Zm1XOGJvaThZVGZGYVhTYVdsNDVUOEdYSlhxbVI0eXNaV3p6TSUyRm9GRk9xaWtpQjRaaDZ6WW9nJTJC; cto_dna_bundle=00MzfF9QUzlFVlN0YXlsWGJrUDdyVnhxWnkzWkN2U0ZXOUdOdjE5UUdlM2VEQ3FYdFlMZnhDZ3RZVlluTUhDJTJCbHNDSEpuU2NuQkhGemQwOHdJOTh5MzJrS2JRJTNEJTNE; pt=c8d50fd8d99794e6af65fd793eac87f9; _gid=GA1.2.1721439361.1694805227; _cc_id=3b0c145a50cce2d2f28db274fe821346; panoramaId_expiry=1695410067287; panoramaId=3198e903f40daf19bb458a188c9416d53938d90c0ba404ca5624377d86b42107; panoramaIdType=panoIndiv; __cf_bm=yqAfurRNE66AvVMo6mfQ2sDOOQ14lKajNqSVZ0KI8ZA-1694811876-0-ATuyh/gReNZVl2TtBcTqNG2ZZzTK2xLDgtGISYPThsJclI2CrH9zhv1BPTXSoXfh+rX5Og9Xg6APfPq165jcYBk=; euconsent-v2=CPyJDEAPyJDEAAKAwAENDXCsAP_AAH_AACiQJqtV_H__bW9r8X7_aft0eY1P9_j77uQxBhfJE-4F3LvW_JwXx2E5NF36tqoKmRoEu3ZBIUNlHJHUTVmwaogVryHsak2cpTNKJ6BkkFMRM2dYCF5vm4tjeQKY5_p_d3fx2D-t_dv839z3z81Xn3d5f--0-PCdU5-9Dfn9fRfb-9IP9_78v8v8_l_rk2_eT13_pcvr_D--f_87_XW-4goAEmGhcQBdkQEhNoGEUCAEYVhARQKAAAASBogIAXBgU7IwCXWAiAECKAA4IAQgAoyABAAAJAAhEAEgRQIAAIBAIAAQAIBAIAGBgAHABaCAQAAgOgYphQAKBYQJEJEQpgQhQJBAS2VCCUFwgrhAEWWBFAIjYKABAEgIrAAEBYvAYAkBKxIIEuoNoAACABAKKUKhFJ-YAhwTNlqrxQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA.YAAAAAAAAAAA; addtl_consent=1~43.3.9.6.9.13.6.4.15.9.5.2.11.1.7.1.3.2.10.33.4.6.9.17.2.9.20.7.20.5.20.6.5.1.4.11.29.4.14.9.3.10.6.2.9.6.6.9.8.29.4.5.3.1.27.1.17.10.9.1.8.6.2.8.3.4.146.65.1.17.1.18.25.35.5.18.9.7.41.2.4.18.24.4.9.6.5.2.14.18.7.3.2.2.8.28.8.6.3.10.4.20.2.13.4.10.11.1.3.22.16.2.6.8.6.11.6.5.33.11.8.1.10.28.12.1.5.19.9.6.40.17.4.9.15.8.7.3.12.7.2.4.1.7.12.13.22.13.2.14.10.1.4.15.2.4.9.4.5.4.7.13.5.15.4.13.4.14.10.15.2.5.6.2.2.1.2.14.7.4.8.2.9.10.18.12.13.2.18.1.1.3.1.1.9.25.4.1.19.8.4.8.5.4.8.4.4.2.14.2.13.4.2.6.9.6.3.2.2.3.5.2.3.6.10.11.6.3.19.11.3.1.2.3.9.19.26.3.10.7.6.4.3.4.6.3.3.3.3.1.1.1.6.11.3.1.1.11.6.1.10.5.8.3.2.2.4.3.2.2.7.15.7.14.1.3.3.4.5.4.3.2.2.5.5.1.2.9.7.9.1.5.3.7.10.11.1.3.1.1.2.1.3.2.6.1.12.8.1.3.1.1.2.2.7.7.1.4.3.6.1.2.1.4.1.1.4.1.1.2.1.8.1.7.4.3.3.3.5.3.15.1.15.10.28.1.2.2.12.3.4.1.6.3.4.7.1.3.1.4.1.5.3.1.3.4.1.5.2.3.1.2.2.6.2.1.2.2.2.4.1.1.1.2.2.1.1.1.1.2.1.1.1.2.2.1.1.2.1.2.1.7.1.4.1.2.1.1.1.1.2.1.4.2.1.1.9.1.6.2.1.6.2.3.2.1.1.1.2.5.2.4.1.1.2.2.1.1.7.1.2.2.1.2.1.2.3.1.1.2.4.1.1.1.5.1.3.6.3.1.5.5.4.1.2.3.1.4.3.2.2.3.1.1.1.1.1.11.1.3.1.1.2.2.5.2.3.3.5.2.7.1.1.2.5.1.9.5.1.3.1.8.4.5.1.9.1.1.1.2.1.1.1.4.2.13.1.1.3.1.2.2.3.1.2.1.1.1.2.1.3.1.1.1.1.2.4.1.5.1.2.4.3.8.2.2.9.7.2.2.1.2.1.3.1.6.1.7.1.1.2.6.3.1.2.1.200.200.100.100.200.400.100.100.100.200.200.1700.100.204.596.100.1000.800.500.400.400.500.1300',
        'Upgrade-Insecure-Requests': '1',
        'Sec-Fetch-Dest': 'document',
        'Sec-Fetch-Mode': 'navigate',
        'Sec-Fetch-Site': 'none',
        'Sec-Fetch-User': '?1',
        # Requests doesn't support trailers
        # 'TE': 'trailers',
    }

    response = requests.get('https://whatismyipaddress.com/ip/'+ip, cookies=cookies, headers=headers).text
    return response
    # soup = BeautifulSoup(html_text, 'html.parser')

    # #Scraping Data
    # div_text = str(soup.find("div",{"class":"ip-detail expanded"}).text.replace("\n","").strip())
    
    # # ذخیره متن به عنوان یک فایل JSON
    data = {'ip_detail': html_text}
    with open('info.json', 'w', encoding='utf-8') as json_file:
        json.dump(data, json_file, ensure_ascii=False, indent=2)